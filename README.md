# PatreonOJ - åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

PatreonOJ æ˜¯ä¸€ä¸ªåŸºäº Go + Gin + GORM çš„åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹å’Œè¯„æµ‹æ¨¡å¼ï¼Œå…·æœ‰å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€é¢˜ç›®ç®¡ç†å’Œä»£ç è¯„æµ‹åŠŸèƒ½ã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å¤šæ•°æ®åº“æ”¯æŒ
- **MySQL**: é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒçš„é«˜æ€§èƒ½æ•°æ®åº“
- **SQLite**: é€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒçš„è½»é‡çº§æ•°æ®åº“

### âš™ï¸ é…ç½®ç®¡ç†
- ä½¿ç”¨ Viper è¿›è¡Œé…ç½®ç®¡ç†
- æ”¯æŒ YAML æ ¼å¼é…ç½®æ–‡ä»¶
- æ”¯æŒç¯å¢ƒå˜é‡å’Œé»˜è®¤å€¼

### ğŸ”§ çµæ´»é…ç½®
- æ•°æ®åº“ç±»å‹å¯é…ç½®åˆ‡æ¢
- æœåŠ¡å™¨ç«¯å£å’Œè¿è¡Œæ¨¡å¼å¯é…ç½®
- è¯„æµ‹æœåŠ¡å‚æ•°å¯é…ç½®
- æ—¥å¿—çº§åˆ«å’Œæ ¼å¼å¯é…ç½®

### ğŸ“ æµ‹è¯•ç”¨ä¾‹ç®¡ç†
- å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹CRUDæ“ä½œ
- æ”¯æŒå•ä¸ªå’Œæ‰¹é‡æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- æ”¯æŒæŒ‰é¢˜ç›®ç­›é€‰æŸ¥è¯¢æµ‹è¯•ç”¨ä¾‹
- æ”¯æŒéšè—æµ‹è¯•ç”¨ä¾‹åŠŸèƒ½
- ä¸è¯„æµ‹ç³»ç»Ÿå®Œå…¨é›†æˆ

### ğŸƒâ€â™‚ï¸ åŒæ¨¡å¼è¯„æµ‹ç³»ç»Ÿ
- **æœ¬åœ°è¯„æµ‹**: æ”¯æŒGoã€Pythonã€C++ã€Javaç­‰å¤šç§è¯­è¨€çš„æœ¬åœ°ç¼–è¯‘æ‰§è¡Œ
- **è¿œç¨‹è¯„æµ‹**: æ”¯æŒè°ƒç”¨å¤–éƒ¨è¯„æµ‹APIæœåŠ¡
- **æ²™ç®±éš”ç¦»**: æœ¬åœ°è¯„æµ‹é‡‡ç”¨æ²™ç®±æœºåˆ¶ç¡®ä¿å®‰å…¨æ€§
- **å®æ—¶ç›‘æ§**: æ”¯æŒå†…å­˜ã€æ—¶é—´ã€è¾“å‡ºå¤§å°é™åˆ¶

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
go mod tidy
```

### 2. é…ç½®æ•°æ®åº“

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼š

#### ä½¿ç”¨ MySQL
```yaml
database:
  type: "mysql"
  mysql:
    host: "localhost"
    port: 3306
    username: "root"
    password: "your_password"
    dbname: "patreon_oj"
    charset: "utf8mb4"
    parseTime: true
    loc: "Local"
```

#### ä½¿ç”¨ SQLite
```yaml
database:
  type: "sqlite"
  sqlite:
    path: "./data/patreon.db"
```

### 3. é…ç½®è¯„æµ‹ç³»ç»Ÿ

#### æœ¬åœ°è¯„æµ‹æ¨¡å¼ï¼ˆæ¨èï¼‰
```yaml
judge:
  mode: "local"  # ä½¿ç”¨æœ¬åœ°è¯„æµ‹
  local:
    enabled: true
    sandbox_dir: "./sandbox"  # æ²™ç®±ç›®å½•
    max_memory: 128  # æœ€å¤§å†…å­˜é™åˆ¶(MB)
    max_time: 5  # æœ€å¤§æ‰§è¡Œæ—¶é—´(ç§’)
    max_output_size: 1024  # æœ€å¤§è¾“å‡ºå¤§å°(KB)
    supported_languages:
      - "go"
      - "python"
      - "cpp"
      - "java"
```

#### è¿œç¨‹è¯„æµ‹æ¨¡å¼
```yaml
judge:
  mode: "remote"  # ä½¿ç”¨è¿œç¨‹APIè¯„æµ‹
  api_url: "http://your-judge-service-api"
  timeout: 15  # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  queue_size: 100  # é˜Ÿåˆ—å¤§å°
```

### 4. å¯åŠ¨æœåŠ¡

```bash
go run cmd/PatreonOJ/main.go
```

æˆ–è€…ç¼–è¯‘åè¿è¡Œï¼š

```bash
go build -o PatreonOJ.exe cmd/PatreonOJ/main.go
./PatreonOJ.exe
```

æœåŠ¡å™¨å°†åœ¨é…ç½®çš„ç«¯å£å¯åŠ¨ï¼ˆé»˜è®¤ 8080ï¼‰ã€‚

## é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
- `database.type`: æ•°æ®åº“ç±»å‹ï¼Œæ”¯æŒ "mysql" æˆ– "sqlite"
- `database.mysql.*`: MySQL ç›¸å…³é…ç½®
- `database.sqlite.path`: SQLite æ•°æ®åº“æ–‡ä»¶è·¯å¾„

### æœåŠ¡å™¨é…ç½®
- `server.port`: æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰
- `server.mode`: Gin è¿è¡Œæ¨¡å¼ï¼ˆdebug/release/testï¼‰

### è¯„æµ‹æœåŠ¡é…ç½®
- `judge.mode`: è¯„æµ‹æ¨¡å¼ï¼Œæ”¯æŒ "local"ï¼ˆæœ¬åœ°è¯„æµ‹ï¼‰æˆ– "remote"ï¼ˆè¿œç¨‹APIè¯„æµ‹ï¼‰
- `judge.api_url`: è¿œç¨‹è¯„æµ‹æœåŠ¡ API åœ°å€ï¼ˆä»…è¿œç¨‹æ¨¡å¼éœ€è¦ï¼‰
- `judge.timeout`: è¯„æµ‹è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `judge.queue_size`: è¯„æµ‹é˜Ÿåˆ—å¤§å°

#### æœ¬åœ°è¯„æµ‹é…ç½®
- `judge.local.enabled`: æ˜¯å¦å¯ç”¨æœ¬åœ°è¯„æµ‹
- `judge.local.sandbox_dir`: æ²™ç®±ç›®å½•è·¯å¾„
- `judge.local.max_memory`: æœ€å¤§å†…å­˜é™åˆ¶ï¼ˆMBï¼‰
- `judge.local.max_time`: æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
- `judge.local.max_output_size`: æœ€å¤§è¾“å‡ºå¤§å°ï¼ˆKBï¼‰
- `judge.local.supported_languages`: æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€åˆ—è¡¨

### æ—¥å¿—é…ç½®
- `log.level`: æ—¥å¿—çº§åˆ«ï¼ˆdebug/info/warn/errorï¼‰
- `log.format`: æ—¥å¿—æ ¼å¼ï¼ˆjson/textï¼‰
- `log.output`: æ—¥å¿—è¾“å‡ºï¼ˆstdout/fileï¼‰
- `log.file_path`: æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆä»…æ–‡ä»¶è¾“å‡ºæ¨¡å¼éœ€è¦ï¼‰

## API æ¥å£

### ç”¨æˆ·ç®¡ç†
- `GET /user/` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /user/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /user/login` - ç”¨æˆ·ç™»å½•
- `POST /user/logout` - ç”¨æˆ·æ³¨é”€

#### POST æ¥å£ JSON æ ¼å¼

**ç”¨æˆ·æ³¨å†Œ** `POST /user/register`
```json
{
    "username": "ç”¨æˆ·å",
    "password": "å¯†ç "
}
```

**ç”¨æˆ·ç™»å½•** `POST /user/login`
```json
{
    "username": "ç”¨æˆ·å",
    "password": "å¯†ç "
}
```

**ç”¨æˆ·æ³¨é”€** `POST /user/logout`
```json
{
    "user_id": 1
}
```

### é¢˜ç›®ç®¡ç†
- `GET /question/` - è·å–é¢˜ç›®åˆ—è¡¨ï¼ˆæŒ‰é¢˜ç›®ç¼–å·æ’åºï¼‰
- `GET /question/:number` - é€šè¿‡é¢˜ç›®ç¼–å·è·å–å•ä¸ªé¢˜ç›®è¯¦æƒ…
- `POST /question/` - åˆ›å»ºé¢˜ç›®
- `POST /question/:number` - æ›´æ–°é¢˜ç›®ï¼ˆä½¿ç”¨é¢˜ç›®ç¼–å·ï¼‰

#### POST æ¥å£ JSON æ ¼å¼

**åˆ›å»ºé¢˜ç›®** `POST /question/`

å®Œæ•´ç‰ˆç¤ºä¾‹ï¼ˆåŒ…å«æ‰€æœ‰å¯é€‰å­—æ®µï¼‰ï¼š
```json
{
    "question_number": 1001,
    "title": "ä¸¤æ•°ä¹‹å’Œ",
    "content": "ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚",
    "difficulty": "ç®€å•",
    "input_format": "ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæ•°ç»„é•¿åº¦ã€‚\nç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•°ç»„å…ƒç´ ã€‚\nç¬¬ä¸‰è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° targetï¼Œè¡¨ç¤ºç›®æ ‡å€¼ã€‚",
    "output_format": "è¾“å‡ºä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ•°çš„ä¸‹æ ‡ï¼ˆä»0å¼€å§‹ï¼‰ã€‚",
    "sample_input": "4\n2 7 11 15\n9",
    "sample_output": "0 1",
    "sample_explanation": "å› ä¸º nums[0] + nums[1] = 2 + 7 = 9ï¼Œæ‰€ä»¥è¿”å› [0, 1]ã€‚",
    "data_range": "2 â‰¤ n â‰¤ 10^4\n-10^9 â‰¤ nums[i] â‰¤ 10^9\n-10^9 â‰¤ target â‰¤ 10^9",
    "time_limit": 1000,
    "memory_limit": 128,
    "source": "LeetCode",
    "tags": "æ•°ç»„,å“ˆå¸Œè¡¨",
    "hint": "å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨æ¥ä¼˜åŒ–æŸ¥æ‰¾è¿‡ç¨‹",
    "category_id": 1,
    "status": "published"
}
```

æœ€ç®€ç‰ˆç¤ºä¾‹ï¼ˆä»…å¿…å¡«å­—æ®µï¼‰ï¼š
```json
{
    "title": "ä¸¤æ•°ä¹‹å’Œ",
    "content": "ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚",
    "difficulty": "ç®€å•"
}
```

**å­—æ®µè¯´æ˜ï¼š**
- `question_number`: é¢˜ç›®ç¼–å·ï¼ˆå¯é€‰ï¼Œä¸æä¾›æ—¶è‡ªåŠ¨ä»1001å¼€å§‹é€’å¢ï¼‰
- `title`: é¢˜ç›®æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰
- `content`: é¢˜ç›®æè¿°ï¼ˆå¿…å¡«ï¼‰
- `difficulty`: éš¾åº¦ç­‰çº§ï¼ˆå¿…å¡«ï¼‰
- `input_format`: è¾“å…¥æ ¼å¼è¯´æ˜ï¼ˆå¯é€‰ï¼‰
- `output_format`: è¾“å‡ºæ ¼å¼è¯´æ˜ï¼ˆå¯é€‰ï¼‰
- `sample_input`: æ ·ä¾‹è¾“å…¥ï¼ˆå¯é€‰ï¼‰
- `sample_output`: æ ·ä¾‹è¾“å‡ºï¼ˆå¯é€‰ï¼‰
- `sample_explanation`: æ ·ä¾‹è§£é‡Šï¼ˆå¯é€‰ï¼‰
- `data_range`: æ•°æ®èŒƒå›´çº¦æŸï¼ˆå¯é€‰ï¼‰
- `time_limit`: æ—¶é—´é™åˆ¶ï¼Œå•ä½æ¯«ç§’ï¼ˆå¯é€‰ï¼Œé»˜è®¤2000ï¼‰
- `memory_limit`: å†…å­˜é™åˆ¶ï¼Œå•ä½MBï¼ˆå¯é€‰ï¼Œé»˜è®¤256ï¼‰
- `source`: é¢˜ç›®æ¥æºï¼ˆå¯é€‰ï¼‰
- `tags`: é¢˜ç›®æ ‡ç­¾ï¼Œé€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰
- `hint`: æç¤ºä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
- `status`: é¢˜ç›®çŠ¶æ€ï¼ˆå¯é€‰ï¼Œé»˜è®¤"draft"ï¼Œå¯é€‰å€¼ï¼šdraft/published/archivedï¼‰
- `category_id`: åˆ†ç±»IDï¼ˆå¯é€‰ï¼‰

**æ›´æ–°é¢˜ç›®** `POST /question/:number`
```json
{
    "title": "æ›´æ–°åçš„é¢˜ç›®æ ‡é¢˜",
    "content": "æ›´æ–°åçš„é¢˜ç›®å†…å®¹",
    "difficulty": "æ›´æ–°åçš„éš¾åº¦",
    "input_format": "æ›´æ–°åçš„è¾“å…¥æ ¼å¼",
    "output_format": "æ›´æ–°åçš„è¾“å‡ºæ ¼å¼",
    "time_limit": 3000,
    "memory_limit": 512,
    "status": "published",
    "category_id": 2
}
```

### åˆ†ç±»ç®¡ç†
- `GET /category/` - è·å–åˆ†ç±»åˆ—è¡¨
- `POST /category/` - åˆ›å»ºåˆ†ç±»
- `POST /category/:id` - æ›´æ–°åˆ†ç±»

#### POST æ¥å£ JSON æ ¼å¼

**åˆ›å»ºåˆ†ç±»** `POST /category/`
```json
{
    "name": "åˆ†ç±»åç§°"
}
```

**æ›´æ–°åˆ†ç±»** `POST /category/:id`
```json
{
    "name": "æ›´æ–°åçš„åˆ†ç±»åç§°"
}
```

### å…³ç³»ç®¡ç†
- `GET /relation/` - è·å–å…³ç³»åˆ—è¡¨

### èŠ‚ç‚¹ç®¡ç†
- `GET /node/` - è·å–èŠ‚ç‚¹åˆ—è¡¨

### æµ‹è¯•ç”¨ä¾‹ç®¡ç†
- `GET /testcase/` - è·å–æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
- `GET /testcase/question/:number` - æ ¹æ®é¢˜ç›®ç¼–å·è·å–æµ‹è¯•ç”¨ä¾‹
- `GET /testcase/:id` - è·å–å•ä¸ªæµ‹è¯•ç”¨ä¾‹è¯¦æƒ…
- `POST /testcase/` - æ·»åŠ å•ä¸ªæµ‹è¯•ç”¨ä¾‹
- `POST /testcase/batch` - æ‰¹é‡æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- `PUT /testcase/:id` - æ›´æ–°æµ‹è¯•ç”¨ä¾‹
- `DELETE /testcase/:id` - åˆ é™¤æµ‹è¯•ç”¨ä¾‹

#### POST æ¥å£ JSON æ ¼å¼

**æ·»åŠ å•ä¸ªæµ‹è¯•ç”¨ä¾‹** `POST /testcase/`
```json
{
    "question_number": 1001,
    "input": "1 2",
    "expected_output": "3",
    "is_hidden": false
}
```

**æ‰¹é‡æ·»åŠ æµ‹è¯•ç”¨ä¾‹** `POST /testcase/batch`
```json
{
    "question_number": 1001,
    "test_cases": [
        {
            "input": "1 2",
            "expected_output": "3",
            "is_hidden": false
        },
        {
            "input": "5 10",
            "expected_output": "15",
            "is_hidden": true
        }
    ]
}
```

**å­—æ®µè¯´æ˜ï¼š**
- `question_number`: é¢˜ç›®ç¼–å·ï¼ˆå¿…å¡«ï¼‰
- `input`: è¾“å…¥æ•°æ®ï¼ˆå¿…å¡«ï¼‰
- `expected_output`: æœŸæœ›è¾“å‡ºï¼ˆå¿…å¡«ï¼‰
- `is_hidden`: æ˜¯å¦éšè—æµ‹è¯•ç”¨ä¾‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤falseï¼‰

### ä»£ç è¯„æµ‹
- `POST /submission/` - æäº¤ä»£ç 
- `GET /submission/:id` - è·å–æäº¤ç»“æœ

#### POST æ¥å£ JSON æ ¼å¼

**æäº¤ä»£ç ** `POST /submission/`
```json
{
    "user_id": "ç”¨æˆ·UUID",
    "question_number": 1001,
    "code": "æäº¤çš„ä»£ç å†…å®¹",
    "language": "cpp"
}
```

**å­—æ®µè¯´æ˜ï¼š**
- `user_id`: ç”¨æˆ·UUIDï¼ˆå¿…å¡«ï¼‰
- `question_number`: é¢˜ç›®ç¼–å·ï¼Œå¦‚1001ã€1002ç­‰ï¼ˆå¿…å¡«ï¼‰
- `code`: æäº¤çš„ä»£ç å†…å®¹ï¼ˆå¿…å¡«ï¼‰
- `language`: ç¼–ç¨‹è¯­è¨€ï¼ˆå¿…å¡«ï¼‰ï¼Œæ”¯æŒçš„è¯­è¨€ï¼š
  - `go`: Goè¯­è¨€
  - `cpp`: C++è¯­è¨€
  - `python`: Pythonè¯­è¨€
  - `java`: Javaè¯­è¨€

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "submission_id": "550e8400-e29b-41d4-a716-446655440000",
    "user_id": "ç”¨æˆ·UUID",
    "question_number": 1001,
    "question_id": 1,
    "status": "pending",
    "message": "ä»£ç å·²æäº¤ï¼Œæ­£åœ¨è¯„æµ‹ä¸­",
    "created_at": "2024-01-01T12:00:00Z"
}
```

**è¯„æµ‹ç»“æœçŠ¶æ€ï¼š**
- `pending`: ç­‰å¾…è¯„æµ‹
- `judging`: è¯„æµ‹ä¸­
- `accepted`: é€šè¿‡
- `wrong_answer`: ç­”æ¡ˆé”™è¯¯
- `time_limit_exceeded`: è¶…æ—¶
- `memory_limit_exceeded`: å†…å­˜è¶…é™
- `runtime_error`: è¿è¡Œæ—¶é”™è¯¯
- `compile_error`: ç¼–è¯‘é”™è¯¯
- `system_error`: ç³»ç»Ÿé”™è¯¯


## é¡¹ç›®ç»“æ„

```
PatreonOJ/
â”œâ”€â”€ cmd/                   # å‘½ä»¤è¡Œå·¥å…·
â”‚   â””â”€â”€ PatreonOJ/
â”‚       â””â”€â”€ main.go       # ç¨‹åºå…¥å£
â”œâ”€â”€ internal/             # å†…éƒ¨æ¨¡å—
â”‚   â”œâ”€â”€ Controllers/      # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â””â”€â”€ admin/       # ç®¡ç†å‘˜æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ userController.go      # ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ questionController.go  # é¢˜ç›®ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ categoryController.go  # åˆ†ç±»ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ testCaseController.go  # æµ‹è¯•ç”¨ä¾‹ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ nodeController.go      # èŠ‚ç‚¹ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ relationController.go  # å…³ç³»ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚       â””â”€â”€ submissionController.go # æäº¤ç®¡ç†æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ core.go     # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ user.go     # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ question.go # é¢˜ç›®å’Œæµ‹è¯•ç”¨ä¾‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ submission.go # æäº¤è®°å½•æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ category.go # åˆ†ç±»æ¨¡å‹
â”‚   â”‚   â””â”€â”€ *.go        # å…¶ä»–æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routers/        # è·¯ç”±å±‚
â”‚   â”‚   â””â”€â”€ routers.go  # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ services/       # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ judge_service.go # è¯„æµ‹æœåŠ¡
â”‚   â”‚   â””â”€â”€ local_judge.go   # æœ¬åœ°è¯„æµ‹æœåŠ¡
â”‚   â””â”€â”€ config/         # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ config.go   # é…ç½®ç»“æ„ä½“
â”œâ”€â”€ sandbox/            # æ²™ç®±ç›®å½•ï¼ˆæœ¬åœ°è¯„æµ‹ï¼‰
â”œâ”€â”€ data/              # æ•°æ®ç›®å½•ï¼ˆSQLiteæ•°æ®åº“ï¼‰
â”œâ”€â”€ logs/              # æ—¥å¿—ç›®å½•
â”œâ”€â”€ config.yaml        # é…ç½®æ–‡ä»¶
â”œâ”€â”€ go.mod            # Goæ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum            # Goæ¨¡å—ä¾èµ–
â””â”€â”€ README.md         # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```


## å¼€å‘è¯´æ˜

### æ•°æ®åº“è¿ç§»
ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œæ•°æ®åº“è¡¨è¿ç§»ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚

### æ·»åŠ æ–°æ¨¡å‹
1. åœ¨ `internal/models/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ¨¡å‹æ–‡ä»¶
2. åœ¨ `internal/models/core.go` çš„ `AutoMigrate()` å‡½æ•°ä¸­æ·»åŠ æ–°æ¨¡å‹

### æ·»åŠ æ–°æ§åˆ¶å™¨
1. åœ¨ `internal/Controllers/admin/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ§åˆ¶å™¨æ–‡ä»¶
2. åœ¨ `internal/routers/routers.go` ä¸­æ·»åŠ ç›¸åº”çš„è·¯ç”±é…ç½®

### æœ¬åœ°è¯„æµ‹ç³»ç»Ÿ
æœ¬åœ°è¯„æµ‹ç³»ç»Ÿæä¾›å®Œæ•´çš„ä»£ç ç¼–è¯‘å’Œæ‰§è¡ŒåŠŸèƒ½ï¼š

#### æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€
- **Go**: ä½¿ç”¨ `go build` ç¼–è¯‘ï¼Œæ”¯æŒæ ‡å‡†è¾“å…¥è¾“å‡º
- **C++**: ä½¿ç”¨ `g++` ç¼–è¯‘ï¼Œæ”¯æŒæ ‡å‡†è¾“å…¥è¾“å‡º
- **Python**: ç›´æ¥ä½¿ç”¨ `python` è§£é‡Šå™¨æ‰§è¡Œ
- **Java**: ä½¿ç”¨ `javac` ç¼–è¯‘ï¼Œ`java` æ‰§è¡Œ

#### å®‰å…¨æœºåˆ¶
- **æ²™ç®±éš”ç¦»**: æ¯æ¬¡è¯„æµ‹åœ¨ç‹¬ç«‹çš„æ²™ç®±ç›®å½•ä¸­è¿›è¡Œ
- **èµ„æºé™åˆ¶**: æ”¯æŒå†…å­˜ã€æ—¶é—´ã€è¾“å‡ºå¤§å°é™åˆ¶
- **è‡ªåŠ¨æ¸…ç†**: è¯„æµ‹å®Œæˆåè‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

#### ç¯å¢ƒè¦æ±‚
ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…ç›¸åº”çš„ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ï¼š
- Go: `go version` æ£€æŸ¥Goç¯å¢ƒ
- C++: `g++ --version` æ£€æŸ¥GCCç¯å¢ƒ
- Python: `python --version` æ£€æŸ¥Pythonç¯å¢ƒ
- Java: `javac -version` å’Œ `java -version` æ£€æŸ¥Javaç¯å¢ƒ


### ç¯å¢ƒåˆ‡æ¢
é€šè¿‡ä¿®æ”¹ `config.yaml` ä¸­çš„ç›¸å…³é…ç½®å³å¯åˆ‡æ¢ï¼š

#### æ•°æ®åº“åˆ‡æ¢
ä¿®æ”¹ `database.type` å­—æ®µï¼š
- å¼€å‘ç¯å¢ƒï¼šæ¨èä½¿ç”¨ SQLite
- ç”Ÿäº§ç¯å¢ƒï¼šæ¨èä½¿ç”¨ MySQL

#### è¯„æµ‹æ¨¡å¼åˆ‡æ¢
ä¿®æ”¹ `judge.mode` å­—æ®µï¼š
- æœ¬åœ°è¯„æµ‹ï¼šè®¾ç½®ä¸º "local"ï¼ˆæ¨èï¼‰
- è¿œç¨‹è¯„æµ‹ï¼šè®¾ç½®ä¸º "remote"

## æ³¨æ„äº‹é¡¹

1. **SQLite æ•°æ®åº“æ–‡ä»¶**: ç¡®ä¿ SQLite æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•å…·æœ‰å†™æƒé™
2. **MySQL è¿æ¥**: ç¡®ä¿ MySQL æœåŠ¡æ­£åœ¨è¿è¡Œä¸”è¿æ¥ä¿¡æ¯æ­£ç¡®
3. **é…ç½®æ–‡ä»¶**: é¦–æ¬¡è¿è¡Œå‰è¯·æ£€æŸ¥å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç›¸å…³å‚æ•°
4. **ç«¯å£å ç”¨**: ç¡®ä¿é…ç½®çš„ç«¯å£æœªè¢«å…¶ä»–ç¨‹åºå ç”¨
5. **æµ‹è¯•ç”¨ä¾‹ç®¡ç†**: æ¯ä¸ªé¢˜ç›®è‡³å°‘éœ€è¦ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰èƒ½è¿›è¡Œä»£ç è¯„æµ‹
6. **æ•°æ®å®Œæ•´æ€§**: åˆ é™¤é¢˜ç›®æ—¶ä¼šè‡ªåŠ¨åˆ é™¤ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹å’Œæäº¤è®°å½•
7. **æœ¬åœ°è¯„æµ‹ç¯å¢ƒ**: 
   - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…æ‰€éœ€çš„ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨
   - Windowsç³»ç»Ÿéœ€è¦æ­£ç¡®é…ç½®PATHç¯å¢ƒå˜é‡
   - æ²™ç®±ç›®å½•éœ€è¦æœ‰è¯»å†™æƒé™
8. **è·¯å¾„é—®é¢˜**: 
   - Windowsç³»ç»Ÿä¸‹æ³¨æ„è·¯å¾„åˆ†éš”ç¬¦é—®é¢˜
   - å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„é…ç½®æ²™ç®±ç›®å½•
9. **èµ„æºé™åˆ¶**: 
   - æœ¬åœ°è¯„æµ‹çš„èµ„æºé™åˆ¶ä¾èµ–äºç³»ç»Ÿé…ç½®
   - å»ºè®®æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´ç›¸å…³å‚æ•°

## æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Gin
- **ORM**: GORM
- **æ•°æ®åº“**: MySQL / SQLite
- **é…ç½®ç®¡ç†**: Viper
- **UUID**: Google UUID
- **æœ¬åœ°è¯„æµ‹**: 
  - Goç¼–è¯‘å™¨
  - GCC (C++)
  - Pythonè§£é‡Šå™¨
  - Javaç¼–è¯‘å™¨å’Œè™šæ‹Ÿæœº
